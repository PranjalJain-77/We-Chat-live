{"ast":null,"code":"import _toConsumableArray from\"D:/Project/we-chat/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Project/we-chat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{user}from\"../Join/Join\";import socketIo from\"socket.io-client\";import\"./Chat.css\";import sendLogo1 from\"../Image/sendLogo.jpg\";import Message from\"../Message/Message\";import ReactScrollToBottom from\"react-scroll-to-bottom\";import image1 from\"../Image/remove.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var ENDPOINT='https://we-chat-1.herokuapp.com/';var Chat=function Chat(){//  const [id,setid]= useState(\"\")\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setid=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];var send=function send(){var message=document.getElementById('chatInput').value;socket.emit('message',{message:message,id:id});document.getElementById('chatInput').value=\"\";};console.log(messages);useEffect(function(){socket=socketIo(ENDPOINT,{transports:['websocket']});socket.on('connect',function(){setid(socket.id);});console.log(socket);socket.emit('joined',{user:user});socket.on('welcome',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('userJoined',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});socket.on('leave',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message);});return function(){socket.emit('Disconnect');socket.off();};},[]);useEffect(function(){socket.on('sendMessage',function(data){setMessages([].concat(_toConsumableArray(messages),[data]));console.log(data.user,data.message,data.id);});return function(){socket.off();};},[messages]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"We Chat\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"/\",children:[/*#__PURE__*/_jsx(\"img\",{src:image1,alt:\"logo\"}),\" \"]})]}),/*#__PURE__*/_jsx(ReactScrollToBottom,{className:\"chatBox\",children:messages.map(function(item,i){return/*#__PURE__*/_jsx(Message,{user:item.id===id?'':item.user,message:item.message,classs:item.id===id?'right':'left'});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"chatInput\",onKeyPress:function onKeyPress(event){return event.key==='Enter'?send():null;}}),/*#__PURE__*/_jsx(\"button\",{onClick:send,className:\"sendBtn\",children:/*#__PURE__*/_jsx(\"img\",{src:sendLogo1,alt:\"Send\"})})]})]})});};export default Chat;/* { <messages>\r\n    <Message message={'hey whats up'} classs='left'/>\r\n    <Message message={'hey whats up'} classs='right'/>\r\n    </messages> }*/","map":{"version":3,"sources":["D:/Project/we-chat/src/component/Chat/Chat.js"],"names":["React","useEffect","useState","user","socketIo","sendLogo1","Message","ReactScrollToBottom","image1","socket","ENDPOINT","Chat","id","setid","messages","setMessages","send","message","document","getElementById","value","emit","console","log","transports","on","data","off","map","item","i","event","key"],"mappings":"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","sourcesContent":["import React, { useEffect ,useState } from 'react'\r\nimport {user} from\"../Join/Join\";\r\nimport socketIo from \"socket.io-client\";\r\nimport \"./Chat.css\";\r\nimport sendLogo1 from \"../Image/sendLogo.jpg\";\r\nimport Message from \"../Message/Message\";\r\nimport ReactScrollToBottom from \"react-scroll-to-bottom\";\r\nimport image1 from\"../Image/remove.jpg\";\r\n\r\nlet socket;\r\nconst ENDPOINT='https://we-chat-1.herokuapp.com/';\r\n\r\n\r\nconst Chat = () => {\r\n\r\n  //  const [id,setid]= useState(\"\")\r\n    const [id, setid] = useState(\"\");\r\n    const [messages,setMessages]= useState([])\r\n\r\n  \r\n    const send= () =>{\r\n        const message=document.getElementById('chatInput').value;\r\n        socket.emit('message',{message,id});\r\n        document.getElementById('chatInput').value=\"\";\r\n\r\n    }\r\n    console.log(messages);\r\n\r\n    useEffect(() => {\r\n\r\n    socket=socketIo(ENDPOINT,{transports:['websocket']}); \r\n\r\n      socket.on('connect',()=>{\r\n          \r\n          setid(socket.id);\r\n      })\r\n      console.log(socket);\r\n\r\n      socket.emit('joined',{ user })\r\n      \r\n      socket.on('welcome',(data) =>{\r\n         setMessages([...messages,data]);\r\n        console.log(data.user,data.message);\r\n      })\r\n\r\n      socket.on('userJoined',(data)=>{\r\n       setMessages([...messages,data]);\r\n          console.log(data.user,data.message);\r\n      })\r\n      socket.on('leave',(data)=>{\r\n       setMessages([...messages,data]);\r\n          console.log(data.user,data.message);\r\n      })\r\n      return () => {\r\n       socket.emit('Disconnect')\r\n        socket.off();\r\n      }\r\n    }, [])\r\n    \r\n  \r\n\r\n    useEffect(() => {\r\n      socket.on('sendMessage',(data)=>{\r\n        setMessages([...messages,data]);\r\n          console.log(data.user,data.message,data.id);\r\n      })\r\n    \r\n      return () => {\r\n        socket.off(); \r\n      }\r\n      \r\n    },[messages])\r\n    \r\n\r\n    return (\r\n    <div className=\"chatPage\">\r\n        <div className=\"chatContainer\">\r\n            <div className=\"header\">\r\n                <h2>We Chat</h2>\r\n                <a href='/'><img src={image1} alt=\"logo\"></img> </a> \r\n                \r\n            </div>\r\n            <ReactScrollToBottom className=\"chatBox\">\r\n\r\n                { messages.map((item,i) =>  <Message  user={item.id===id ? '':item.user} message={item.message} classs={item.id === id ?'right':'left' }/>)}\r\n            </ReactScrollToBottom>\r\n            <div className=\"inputBox\">\r\n                <input type=\"text\" id=\"chatInput\" onKeyPress={(event)=>event.key==='Enter' ? send():null}></input>\r\n                <button onClick={send} className=\"sendBtn\"><img src={sendLogo1} alt=\"Send\"></img></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Chat\r\n\r\n     \r\n/* { <messages>\r\n    <Message message={'hey whats up'} classs='left'/>\r\n    <Message message={'hey whats up'} classs='right'/>\r\n    </messages> }*/\r\n           "]},"metadata":{},"sourceType":"module"}